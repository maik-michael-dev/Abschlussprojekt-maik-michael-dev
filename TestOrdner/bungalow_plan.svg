<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="140" height="100" viewBox="0 0 700 500">
  <style>
    .wall{fill:#ffffff;stroke:#000000;stroke-width:4}
    .room-label{font-family:Arial, Helvetica, sans-serif;font-size:14px;fill:#111}
    .dim{font-family:Arial, Helvetica, sans-serif;font-size:12px;fill:#333}
    .thin{stroke:#333;stroke-width:1}
  </style>
  <!-- Interactivity: toggle doors open/closed by clicking the hinge -->
  <script type="text/ecmascript"><![CDATA[
    function setButtonLabel(){
      try{
        var btn = document.getElementById('door-toggle-btn-text');
        if(!btn) return;
        var anyOpen = areAnyDoorsOpen();
        btn.textContent = anyOpen ? 'Tür-schließen' : 'Tür-öffnen';
      }catch(e){console.log(e);}    
    }

    function areAnyDoorsOpen(){
      var ids = ['kitchen','bed','bath','living','entry'];
      for(var i=0;i<ids.length;i++){
        var leaf = document.getElementById('door-'+ids[i]+'-leaf');
        if(leaf){
          var state = leaf.getAttribute('data-state') || 'open';
          if(state==='open') return true;
        }
      }
      return false;
    }

    function toggleDoor(name){
      try{
        var leaf = document.getElementById('door-'+name+'-leaf');
        var arc = document.getElementById('door-'+name+'-arc');
        if(!leaf) return;
        var x1 = leaf.getAttribute('x1'), y1 = leaf.getAttribute('y1');
        var openX2 = leaf.getAttribute('data-open-x2');
        var openY2 = leaf.getAttribute('data-open-y2');
        if(!openX2) openX2 = leaf.getAttribute('x2');
        if(!openY2) openY2 = leaf.getAttribute('y2');
        var state = leaf.getAttribute('data-state') || 'open';
        if(state==='open'){
          // close: collapse to hinge
          leaf.setAttribute('x2', x1);
          leaf.setAttribute('y2', y1);
          leaf.setAttribute('data-state','closed');
          if(arc) arc.setAttribute('display','none');
        } else {
          // open: restore
          leaf.setAttribute('x2', openX2);
          leaf.setAttribute('y2', openY2);
          leaf.setAttribute('data-state','open');
          if(arc) arc.setAttribute('display','inline');
        }
        setButtonLabel();
      }catch(e){console.log(e);}    
    }

    function toggleAllDoors(){
      try{
        var ids = ['kitchen','bed','bath','living','entry'];
        var anyOpen = areAnyDoorsOpen();
        for(var i=0;i<ids.length;i++){
          var leaf = document.getElementById('door-'+ids[i]+'-leaf');
          var arc = document.getElementById('door-'+ids[i]+'-arc');
          if(!leaf) continue;
          var x1 = leaf.getAttribute('x1'), y1 = leaf.getAttribute('y1');
          var openX2 = leaf.getAttribute('data-open-x2') || leaf.getAttribute('x2');
          var openY2 = leaf.getAttribute('data-open-y2') || leaf.getAttribute('y2');
          if(anyOpen){
            // close all
            leaf.setAttribute('x2', x1);
            leaf.setAttribute('y2', y1);
            leaf.setAttribute('data-state','closed');
            if(arc) arc.setAttribute('display','none');
          } else {
            // open all
            leaf.setAttribute('x2', openX2);
            leaf.setAttribute('y2', openY2);
            leaf.setAttribute('data-state','open');
            if(arc) arc.setAttribute('display','inline');
          }
        }
        setButtonLabel();
      }catch(e){console.log(e);}    
    }

    // initialize button label on load
    document.addEventListener('DOMContentLoaded', function(){ setButtonLabel(); });
    // also try immediate call for viewers that execute scripts after parsing
    try{ setButtonLabel(); }catch(e){}
  ]]></script>

  <!-- Maßstab: 50 px = 1 m -->
  <!-- Hauptleiste: 11 m x 3 m (oben) -->
  <rect class="wall" x="0" y="0" width="550" height="150"/>

  <!-- Schlafzimmer: 5 m x 3 m (links oben) - wurde mit Küche vertauscht -->
  <rect class="wall" x="0" y="0" width="250" height="150"/>
  <text x="10" y="25" class="room-label">Schlafz.</text>
  <text x="10" y="45" class="dim">5 m × 3 m</text>

  <!-- Küche: 3 m x 3 m (neben Schlafzimmer) -->
  <rect class="wall" x="250" y="0" width="150" height="150"/>
  <text x="260" y="25" class="room-label">Küche</text>
  <text x="260" y="45" class="dim">3 m × 3 m</text>

  <!-- Küchentür: linksbündig an der unteren Kante der Küche, 90 cm = 45 px -->
  <!-- Annahme: Tür sitzt an der linken unteren Ecke der Küche und öffnet nach innen rechts -->
  <circle cx="250" cy="150" r="2.5" fill="#3b220f" onclick="toggleDoor('kitchen')" style="cursor:pointer" />
  <!-- Türblatt 90 cm = 45 px, öffnet nach innen (in die Küche) nach rechts -->
  <line id="door-kitchen-leaf" x1="250" y1="150" x2="295" y2="150" stroke="#5c3b1a" stroke-width="3" data-open-x2="295" data-open-y2="150" data-state="open"/>
  <!-- Schwenkbogen: Radius 45 px -->
  <path id="door-kitchen-arc" d="M295 150 A45 45 0 0 0 250 105" fill="none" stroke="#5c3b1a" stroke-width="2" stroke-dasharray="2,2"/>
  <text x="255" y="160" class="room-label">Küchentür (90 cm)</text>

  <!-- Neu: zusätzliche Tür an der unteren Ecke Schlafzimmer/Küche (rechtsbündig), 90 cm -->
  <!-- Hinge nahe Ecke: cx=245 cy=150, öffnet nach links ins Schlafzimmer (rechtsbündig Scharnier) -->
  <circle cx="245" cy="150" r="2.5" fill="#3b220f" onclick="toggleDoor('bed')" style="cursor:pointer" />
  <line id="door-bed-leaf" x1="245" y1="150" x2="200" y2="150" stroke="#5c3b1a" stroke-width="3" data-open-x2="200" data-open-y2="150" data-state="open"/>
  <path id="door-bed-arc" d="M200 150 A45 45 0 0 1 245 105" fill="none" stroke="#5c3b1a" stroke-width="2" stroke-dasharray="2,2"/>
  <text x="205" y="160" class="room-label">Schlafzimmertür (90 cm)</text>

  <!-- Wohnzimmertür entfernt -->

  <!-- Bad: 3 m x 2 m (unter Schlafzimmer) - Größe angepasst -->
  <rect class="wall" x="0" y="150" width="150" height="100"/>
  <text x="10" y="190" class="room-label">Bad</text>
  <text x="10" y="210" class="dim">3 m × 2 m</text>
  <!-- Badtür: 60 cm = 30 px, rechtsbündig an der Badwand (Scharnier rechts), öffnet nach links ins Bad -->
  <circle cx="150" cy="200" r="2.5" fill="#3b220f" onclick="toggleDoor('bath')" style="cursor:pointer" />
  <line id="door-bath-leaf" x1="150" y1="200" x2="120" y2="200" stroke="#5c3b1a" stroke-width="3" data-open-x2="120" data-open-y2="200" data-state="open"/>
  <path id="door-bath-arc" d="M120 200 A30 30 0 0 1 150 170" fill="none" stroke="#5c3b1a" stroke-width="2" stroke-dasharray="2,2"/>
  <text x="60" y="205" class="room-label">Badtür (60 cm)</text>

  <!-- Pergola: 5 m x 3 m (südlich von Bad und Eingang) - unter Bad & Eingang platziert -->
  <rect x="0" y="250" width="250" height="150" fill="#f6f6f6" stroke="#ccc" stroke-width="1"/>
  <text x="10" y="275" class="room-label">Pergola</text>
  <text x="10" y="295" class="dim">5 m × 3 m</text>

  <!-- Holzverbindung: Brücke zwischen Pergola und Wintergarten (2 m × 1 m) und Erweiterung 1 m × 3 m rechts neben Pergola -->
  <!-- Vertikale Erweiterung: rechts neben Pergola (1 m × 2 m) -->
  <!-- linke Kante der Erweiterung = Pergola-Rechtskante (x=250), unten bündig mit Pergola (bottom y=400) -->
  <rect x="250" y="300" width="50" height="100" fill="#8B5A2B" stroke="#5c3b1a" stroke-width="2"/>
  <text x="255" y="315" class="room-label">Holz-Boden-Verbindung-2</text>
  <text x="255" y="330" class="dim">1 m × 2 m</text>
  <!-- Horizontale Brücke (verbindet zur Pergola/Wintergarten): 2 m × 1 m; genau zwischen Pergola und Wintergarten -->
  <!-- spans x 250..350 (fills the gap) and vertically centered between Pergola top (y=250) and Wintergarten bottom (y=300) -->
  <rect x="250" y="250" width="100" height="50" fill="#8B5A2B" stroke="#5c3b1a" stroke-width="2"/>
  <text x="260" y="275" class="room-label">Holz-Boden-Verbindung-1</text>
  <text x="260" y="290" class="dim">2 m × 1 m</text>

  <!-- Wohnzimmer (oben rechts): 3 m × 3 m (verkleinert) -->
  <rect class="wall" x="400" y="0" width="150" height="150"/>
  <text x="410" y="20" class="room-label">Wohnzimmer</text>
  <text x="410" y="40" class="dim">3 m × 3 m</text>
  <!-- Wohnungstür: gedreht um 180° nach links - jetzt links öffnend (küchen-ähnlich) -->
  <circle cx="395" cy="150" r="2.5" fill="#3b220f" onclick="toggleDoor('living')" style="cursor:pointer" />
  <!-- Türblatt 90 cm = 45 px, öffnet nach links -->
  <line id="door-living-leaf" x1="395" y1="150" x2="350" y2="150" stroke="#5c3b1a" stroke-width="3" data-open-x2="350" data-open-y2="150" data-state="open"/>
  <!-- Schwenkbogen: Radius 45 px - angepasst für links öffnende Tür (dashed) -->
  <path id="door-living-arc" d="M350 150 A45 45 0 0 1 395 105" fill="none" stroke="#5c3b1a" stroke-width="2" stroke-dasharray="2,2"/>
  <text x="360" y="160" class="room-label">Wohnzimmertür (90 cm)</text>

  <!-- Eingang: rechts neben dem Bad (3 m × 2 m) - verkleinert -->
  <rect x="150" y="150" width="150" height="100" fill="#f6f6f6" stroke="#000" stroke-width="2"/>
  <text x="160" y="185" class="room-label">Eingang</text>
  <text x="160" y="205" class="dim">3 m × 2 m</text>

  <!-- Eingangstür: grafische Bauzeichnung (rechtsbündig geöffnet) mit 1 m Spannweite (50 px) -->
  <!-- Scharnierpunkt an der rechten Eingangs-Rechteckkante -->
  <circle cx="300" cy="250" r="2.5" fill="#3b220f" onclick="toggleDoor('entry')" style="cursor:pointer" />
  <!-- Türblatt (nach innen öffnend nach links), 1 m = 50 px -->
  <line id="door-entry-leaf" x1="300" y1="250" x2="250" y2="250" stroke="#5c3b1a" stroke-width="3" data-open-x2="250" data-open-y2="250" data-state="open"/>
  <!-- Schwenkbogen: 90° Bogen, Radius 50 px (öffnet nach links/innen) -->
  <path id="door-entry-arc" d="M250 250 A50 50 0 0 1 300 200" fill="none" stroke="#5c3b1a" stroke-width="2" stroke-dasharray="2,2"/>
  <text x="255" y="260" class="room-label">Eingangstür</text>

  <!-- Aquarium: 1 m × 2 m direkt unter der Küche (oben bündig mit Unterkante Küche) -->
  <rect x="300" y="150" width="50" height="100" fill="#99ddff" stroke="#0077aa" stroke-width="2"/>
  <text x="305" y="175" class="room-label">Aquarium</text>
  <text x="305" y="190" class="dim">1 m × 2 m</text>

  <!-- Wintergarten: 4 m × 3 m unter dem Wohnzimmer -->
  <rect x="350" y="150" width="200" height="150" fill="#e6ffe6" stroke="#228822" stroke-width="2"/>
  <text x="360" y="180" class="room-label">Wintergarten</text>
  <text x="360" y="200" class="dim">4 m × 3 m</text>

  <!-- Hilfsachsen / Maße -->
  <!-- Horizontale Gesamtmaß 11 m -->
  <line class="thin" x1="0" y1="470" x2="550" y2="470" />
  <line class="thin" x1="0" y1="465" x2="0" y2="475" />
  <line class="thin" x1="550" y1="465" x2="550" y2="475" />
  <text x="260" y="490" class="dim">Gesamtlänge 11 m</text>

  <!-- Vertikale Gesamttiefe (max 6 m wegen Wohnzimmer) -->
  <line class="thin" x1="630" y1="0" x2="630" y2="450" />
  <line class="thin" x1="625" y1="0" x2="635" y2="0" />
  <line class="thin" x1="625" y1="450" x2="635" y2="450" />
  <text x="640" y="230" class="dim" transform="rotate(90 640,230)">Max. Tiefe 6 m (Wohnzimmer)</text>

  <!-- Kleine Beschriftungen bei Raumgrenzen (m) -->
  <text x="125" y="140" class="dim">5 m</text>
  <text x="325" y="140" class="dim">3 m</text>
    <text x="475" y="140" class="dim">3 m</text>
  <text x="525" y="140" class="dim">1 m</text>
  <text x="525" y="320" class="dim">3 m</text>

  <!-- Skala unten links -->
  <rect x="10" y="420" width="150" height="30" fill="#fff" stroke="#ccc" />
  <text x="15" y="440" class="dim">Maßstab: 50 px = 1 m</text>

  <!-- Button: toggle all doors -->
  <g id="door-toggle-button" onclick="toggleAllDoors()" style="cursor:pointer">
    <rect x="170" y="420" width="140" height="30" fill="#eee" stroke="#333" rx="4" ry="4"/>
    <text id="door-toggle-btn-text" x="240" y="440" text-anchor="middle" class="dim">Tür-öffnen</text>
  </g>

</svg>
